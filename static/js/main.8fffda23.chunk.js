(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},32:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(20),s=n.n(c),i=(n(29),n(3)),o=n(4),u=n(6),l=n(5),d=n(7),j=n(2),b=n.n(j),h=n(9),p=n(13),f=n(0),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("p",{children:"Carregando..."})}}]),n}(a.Component),O=n(17),v="user",x=function(t){return localStorage.setItem(v,JSON.stringify(t))},g=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},k=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(v));null===e&&(e={}),g(e)(t)}))},N=function(t){return new Promise((function(e){x(Object(O.a)(Object(O.a)({},{name:"",email:"",image:"",description:""}),t)),g("OK")(e)}))},y=(n(32),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).state={loading:!0,user:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:e=t.sent,this.setState({loading:!1,user:e.name});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.user;return Object(f.jsx)("header",{"data-testid":"header-component",children:!0===e?Object(f.jsx)(m,{}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"header row",children:[Object(f.jsx)(p.b,{className:"link1 col",to:"/search","data-testid":"link-to-search",children:"Busca"}),Object(f.jsx)(p.b,{className:"link2 col",to:"/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(f.jsx)(p.b,{className:"link3 col",to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]}),Object(f.jsx)("div",{className:"user row",children:Object(f.jsx)("h2",{"data-testid":"header-user-name",children:n})})]})})}}]),n}(a.Component)),w=y,S=function(){var t=Object(h.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=S,I=n(24),D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var B=function(){return JSON.parse(localStorage.getItem(D))},R=function(t){return localStorage.setItem(D,JSON.stringify(t))},P=function(t){return function(e){setTimeout((function(){e(t)}),500)}},J=function(t){return new Promise((function(e){if(t){var n=B();R([].concat(Object(I.a)(n),[t]))}P("OK")(e)}))},U=function(t){return new Promise((function(e){var n=B();R(n.filter((function(e){return e.trackId!==t.trackId}))),P("OK")(e)}))},A=(n(41),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).handleCheckFavorite=function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("favorite_songs").includes(n.trackId)){e.next=7;break}return t.setState({loading:!0}),e.next=4,J(n);case 4:t.setState({loading:!1}),e.next=11;break;case 7:return t.setState({loading:!0}),e.next=10,U(n);case 10:t.setState({loading:!1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={loading:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){new Promise((function(t){var e=B();P(e)(t)}))}},{key:"render",value:function(){var t=this,e=this.props.track,n=e.trackId,a=e.trackName,r=e.previewUrl,c=e.artworkUrl100,s=e.collectionName,i=this.state.loading;return Object(f.jsxs)("div",{className:"song row",children:[Object(f.jsx)("img",{src:c,alt:s}),Object(f.jsx)("h3",{children:a}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"})]}),Object(f.jsxs)("label",{htmlFor:"favorite",children:["Favorita",Object(f.jsx)("input",{type:"checkbox","data-testid":"checkbox-music-".concat(n),checked:localStorage.getItem("favorite_songs").includes(n),onChange:function(){return t.handleCheckFavorite(e)}})]}),i&&Object(f.jsx)(m,{})]})}}]),n}(a.Component)),F=A,M=(n(42),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).state={loading:!0,songs:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(b.a.mark((function t(){var e,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,C(e.props.match.params.id);case 3:n=t.sent,this.setState({songs:n,loading:!1});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.songs;return Object(f.jsxs)("div",{"data-testid":"page-album",children:[Object(f.jsx)(w,{}),e?Object(f.jsx)(m,{}):Object(f.jsxs)("div",{className:"container-div",children:[Object(f.jsx)("h3",{"data-testid":"artist-name",children:n[0].artistName}),Object(f.jsx)("h2",{"data-testid":"album-name",children:n[0].collectionName}),n.map((function(t,e){return e>0&&Object(f.jsx)(F,{track:t},t.trackId)}))]})]})}}]),n}(a.Component)),K=M,L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-favorites",children:Object(f.jsx)(w,{})})}}]),n}(a.Component),T=L,_=n(23),E=(n(43),n.p+"static/media/purpleMusic.a215c12d.png"),q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).handleNameChange=function(e){var n=e.target;t.setState({isButtonDisable:n.value.length<3,user:n.value})},t.handleButtonClick=function(){var e=Object(h.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a=t.state.user,t.setState({loading:!0},Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({name:a});case 2:t.setState({loading:!1,redirect:!0});case 3:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={isButtonDisable:!0,user:"",loading:!1,redirect:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.isButtonDisable,n=t.loading,a=t.redirect;return Object(f.jsxs)("div",{className:"login-container row","data-testid":"page-login",children:[n?Object(f.jsx)(m,{}):Object(f.jsxs)("form",{className:"col",children:[Object(f.jsx)("img",{src:E,alt:"imagem de fone"}),Object(f.jsx)("input",{"data-testid":"login-name-input",type:"text",onChange:this.handleNameChange,placeholder:"Nome"}),Object(f.jsx)("input",{"data-testid":"login-submit-button",type:"button",disabled:e,onClick:this.handleButtonClick,value:"Entrar"})]}),a&&Object(f.jsx)(_.Redirect,{to:"/search"})]})}}]),n}(a.Component),H=q,V=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),n}(a.Component),z=V,G=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-profile",children:Object(f.jsx)(w,{})})}}]),n}(a.Component),Q=G,W=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-profile-edit",children:Object(f.jsx)(w,{})})}}]),n}(a.Component),X=W,Y=function(){var t=Object(h.a)(b.a.mark((function t(e){var n,a,r,c,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results,i=s.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=Y,$=(n(44),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.collectionId,n=t.artworkUrl100,a=t.artistName,r=t.collectionName;return Object(f.jsxs)("div",{className:"cardAlbum col",children:[Object(f.jsx)("img",{src:n,alt:r}),Object(f.jsx)("h2",{children:r}),Object(f.jsx)("p",{className:"artistName",children:a}),Object(f.jsx)(p.b,{to:"/album/".concat(e),"data-testid":"link-to-album-".concat(e),children:"Ver album"})]})}}]),n}(a.Component)),tt=$,et=(n(45),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).handleChange=function(e){var n=e.target;t.setState({isButtonDisabled:n.value.length<2,artistName:n.value})},t.getAlbum=Object(h.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.artistName,t.setState({loading:!0},Object(h.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n);case 2:a=e.sent,t.setState({loading:!1,albumsList:a,search:n,artistName:"",artistSearch:!0});case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),t.state={artistName:"",isButtonDisabled:!0,loading:!1,albumsList:[],artistSearch:!1,search:""},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.isButtonDisabled,n=t.loading,a=t.albumsList,r=t.artistSearch,c=t.search;return Object(f.jsxs)("div",{"data-testid":"page-search",children:[Object(f.jsx)(w,{}),Object(f.jsxs)("div",{className:"div-form col",children:[n?Object(f.jsx)(m,{}):Object(f.jsxs)("form",{className:"search-form col",children:[Object(f.jsx)("input",{className:"search-input",type:"text","data-testid":"search-artist-input",onChange:this.handleChange,placeHolder:"Artista"}),Object(f.jsx)("button",{className:"search-button",type:"submit","data-testid":"search-artist-button",disabled:e,onClick:this.getAlbum,children:"Pesquisar"})]}),r&&Object(f.jsxs)("h3",{children:["Resultado de \xe1lbuns de:"," ",c]}),a.length?Object(f.jsx)("div",{className:"cards row",children:a.map((function(t){return Object(f.jsx)(tt,{artworkUrl100:t.artworkUrl100,collectionName:t.collectionName,artistName:t.artistName,collectionId:t.collectionId},t.collectionId)}))}):Object(f.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"})]})]})}}]),n}(a.Component)),nt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(d.Switch,{children:[Object(f.jsx)(d.Route,{exact:!0,path:"/",component:H}),Object(f.jsx)(d.Route,{path:"/search",component:et}),Object(f.jsx)(d.Route,{path:"/album/:id",component:K}),Object(f.jsx)(d.Route,{path:"/favorites",component:T}),Object(f.jsx)(d.Route,{exact:!0,path:"/profile",component:Q}),Object(f.jsx)(d.Route,{exact:!0,path:"/profile/edit",component:X}),Object(f.jsx)(d.Route,{path:"*",component:z})]})}}]),n}(r.a.Component),at=nt;s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(p.a,{basename:"/playtunes",children:Object(f.jsx)(at,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.8fffda23.chunk.js.map